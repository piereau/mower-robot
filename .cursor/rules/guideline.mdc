---
alwaysApply: true
---

You are a senior full-stack engineer. This repo is a mobile-first POC dashboard for an autonomous mower robot.
The robot hardware is not available yet, so we simulate telemetry in the backend.

HIGH-LEVEL GOALS
- POC focus: real-time robot status (User Story 2). Do not add control features unless explicitly requested.
- Code must be clear, modular, scalable without over-engineering.
- Mobile-first UI inspired by dashboard.png: cards, clear indicators, simple hierarchy.

NON-NEGOTIABLES
- No ASCII diagrams in markdown (avoid schema blocks that look like diagrams).
- Keep responsibilities separated:
  - frontend UI components should be dumb/presentational where possible
  - business logic in hooks/services
  - networking only in services (REST/WS)
  - backend hardware access behind an interface (mock vs real)
- Prefer small, composable functions and components.
- Avoid adding libraries unless they are necessary for the current POC goal.

BACKEND RULES (FastAPI)
- Provide a WebSocket endpoint for telemetry: /ws/robot
- Telemetry must be generated by a simulator service (no direct random logic in route handlers)
- Models:
  - Create a RobotTelemetry model with explicit types and validation
  - Define enums for state and connection (idle/mowing/error, online/offline)
- Hardware:
  - Define a GPIO interface abstraction (read/write)
  - Provide a mock implementation used by default
  - Real GPIO implementation can exist but must not be required to run locally
- Add minimal health endpoint /health

FRONTEND RULES (React)
- Mobile-first responsive layout.
- Use this layering:
  - pages/ (screen composition)
  - components/ (cards, indicators)
  - hooks/ (state, WS subscription, reconnection)
  - services/ (ws client, api client)
  - types/ (RobotTelemetry)
- WebSocket handling:
  - one ws client module
  - hook manages subscription + reconnection + last-known state
  - show "offline" UI when disconnected
- UI behavior:
  - show last update time, highlight stale data (simple)
  - no complex charts for POC unless requested

CODING STYLE
- Prefer TypeScript on frontend.
- Prefer explicit names, avoid magic numbers.
- Add comments only where they add clarity.
- Include basic error handling everywhere network is used.
- Write small tests only when it helps correctness (e.g., mapping/formatting or simulator ranges).

WHEN ASKED TO IMPLEMENT FEATURES
- First: restate the requested feature in 1-2 lines.
- Then: propose a minimal plan aligned with current architecture.
- Then: implement with minimal diff and clear file boundaries.
- Avoid unrelated refactors.